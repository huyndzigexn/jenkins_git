# Logfile created on 2025-05-12 07:21:36 +0000 by logger.rb/v1.6.6
[2025-05-12T07:21:37+00:00] INFO: Started Cinc Zero at chefzero://localhost:1 with repository at /opt/gitlab/embedded (One version per cookbook)
[2025-05-12T07:21:37+00:00] INFO: *** Cinc Client 18.3.0 ***
[2025-05-12T07:21:37+00:00] INFO: Platform: x86_64-linux
[2025-05-12T07:21:37+00:00] INFO: Cinc-client pid: 86
[2025-05-12T07:21:40+00:00] INFO: Setting the run_list to ["recipe[gitlab]"] from CLI options
[2025-05-12T07:21:40+00:00] INFO: Run List is [recipe[gitlab]]
[2025-05-12T07:21:40+00:00] INFO: Run List expands to [gitlab]
[2025-05-12T07:21:40+00:00] INFO: Starting Cinc Client Run for gitlab.example.com
[2025-05-12T07:21:40+00:00] INFO: Running start handlers
[2025-05-12T07:21:40+00:00] INFO: Start handlers complete.
[2025-05-12T07:21:42+00:00] INFO: Loading cookbooks [gitlab@0.0.1, package@0.1.0, logrotate@0.1.0, postgresql@0.1.0, redis@0.1.0, monitoring@0.1.0, registry@0.1.0, mattermost@0.1.0, consul@0.1.0, gitaly@0.1.0, praefect@0.1.0, gitlab-kas@0.1.0, gitlab-pages@0.1.0, letsencrypt@0.1.0, nginx@0.1.0, runit@5.1.7, acme@4.1.6, crond@0.1.0]
[2025-05-12T07:21:46+00:00] INFO: Generating default secrets
[2025-05-12T07:21:49+00:00] INFO: Generating /etc/gitlab/gitlab-secrets.json file
[2025-05-12T07:21:49+00:00] WARN: gitlab-rails does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:49+00:00] INFO: Skipped selecting an init system because it was explicitly disabled
[2025-05-12T07:21:49+00:00] WARN: gitlab-shell does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:49+00:00] WARN: gitlab-sshd does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: logrotate does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: logrotate does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: puma does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitlab-rails does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitlab-shell does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitlab-workhorse does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitlab-pages does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitlab-kas does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitaly does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: mailroom does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitaly does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: postgresql does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: postgresql does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] INFO: /opt/gitlab/init/postgresql status does not exist.
[2025-05-12T07:21:50+00:00] WARN: gitlab-kas does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: puma does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: sidekiq does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitlab-workhorse does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: gitlab-exporter does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: redis-exporter does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: prometheus does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: alertmanager does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:50+00:00] WARN: postgres-exporter does not have a log_group or default logdir mode defined. Setting to 0700.
[2025-05-12T07:21:52+00:00] INFO: Running queued delayed notifications before re-raising exception
[2025-05-12T07:21:52+00:00] ERROR: Running exception handlers
[2025-05-12T07:21:52+00:00] ERROR: Exception handlers complete
[2025-05-12T07:21:52+00:00] FATAL: Stacktrace dumped to /opt/gitlab/embedded/cookbooks/cache/cinc-stacktrace.out
[2025-05-12T07:21:52+00:00] FATAL: ---------------------------------------------------------------------------------------
[2025-05-12T07:21:52+00:00] FATAL: PLEASE PROVIDE THE CONTENTS OF THE stacktrace.out FILE (above) IF YOU FILE A BUG REPORT
[2025-05-12T07:21:52+00:00] FATAL: ---------------------------------------------------------------------------------------
[2025-05-12T07:21:52+00:00] FATAL: Mixlib::ShellOut::ShellCommandFailed: storage_directory[/var/opt/gitlab/git-data/repositories] (gitaly::git_data_dirs line 25) had an error: Mixlib::ShellOut::ShellCommandFailed: ruby_block[directory resource: /var/opt/gitlab/git-data/repositories] (gitaly::git_data_dirs line 36) had an error: Mixlib::ShellOut::ShellCommandFailed: Failed asserting that mode permissions on "/var/opt/gitlab/git-data/repositories" is 2770
---- Begin output of set -x && [ "$(stat --printf='%04a' $(readlink -f /var/opt/gitlab/git-data/repositories) | grep -o '....$')" = '2770' ] ----
STDOUT: 
STDERR: + + grep -o ....$
readlink -f /var/opt/gitlab/git-data/repositories
+ stat --printf=%04a /var/opt/gitlab/git-data/repositories
+ [ 0770 = 2770 ]
---- End output of set -x && [ "$(stat --printf='%04a' $(readlink -f /var/opt/gitlab/git-data/repositories) | grep -o '....$')" = '2770' ] ----
Ran set -x && [ "$(stat --printf='%04a' $(readlink -f /var/opt/gitlab/git-data/repositories) | grep -o '....$')" = '2770' ] returned 1
